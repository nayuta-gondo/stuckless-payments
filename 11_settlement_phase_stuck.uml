@startuml
!pragma teoz true
title Settlement Phase - Stuck
hide footbox
participant Alice
participant Bob
participant Carol
participant Dave

== Update ==

Alice -> Bob: update_add_htlc(h_D)

Alice <-> Bob: commit
& Bob -> Carol: update_add_htlc(h_D)

Bob <-> Carol: commit
& Carol -> Dave: update_add_htlc(h_D)

Carol <-> Dave: commit

== Settlement ==

Dave -> Carol: update_fulfill_htlc(r_D)
& Carol ->x Bob: update_fulfill_htlc(r_D)

@enduml
