@startuml
!pragma teoz true
title Update Phase - Stuck
hide footbox
participant Alice
participant Bob
participant Carol
participant Dave

== Update ==

Alice -> Bob: update_add_htlc(h_D)

Alice <-> Bob: commit
& Bob -> Carol: update_add_htlc(h_D)

Bob ->x Carol: commit

newpage

== Settlement ==

Dave -> Carol: update_fulfill_htlc(r_D)
& Carol -> Bob: update_fulfill_htlc(r_D)
& Bob -> Alice: update_fulfill_htlc(r_D)

Dave <-> Carol: commit
& Carol <-> Bob: commit
& Bob <-> Alice: commit

@enduml
